import React from 'react';
import PropType from 'prop-types';
import { Tooltip } from '@patternfly/react-core';
import { ServerAltIcon } from '@patternfly/react-icons';
import { FormattedMessage } from 'react-intl';
import messages from '../../../Messages';
import { STATUS_OPTIONS } from '../../../Helpers/constants';
import { CveStatusWithPopover } from '../CveStatusWithPopover/CveStatusWithPopover';

const StatusColumn = ({ cveStatusId, systemStatusId, statusText }) => {
    const status = STATUS_OPTIONS.find(status => parseInt(status.value) === systemStatusId);

    return (
        <span style={{ display: 'flex', alignItems: 'baseline' }}>
            {cveStatusId !== systemStatusId  &&
                <Tooltip content={<FormattedMessage {...messages.onlyThisSystemCvePair} />}>
                    <ServerAltIcon
                        data-testid="status-column-server-icon"
                        className="pf-v5-u-mr-sm"
                    />
                </Tooltip>
            }
            {
                status && <CveStatusWithPopover popoverText={statusText} statusId={systemStatusId.toString()} />
            }
        </span>
    );
};

StatusColumn.defautProps = {
    systemStatusId: null
};

StatusColumn.propTypes = {
    cveStatusId: PropType.number,
    systemStatusId: PropType.number,
    statusText: PropType.string
};

export default StatusColumn;
