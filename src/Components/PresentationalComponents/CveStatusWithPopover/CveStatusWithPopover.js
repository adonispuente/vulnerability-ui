import React from 'react';
import PropTypes from 'prop-types';
import { STATUS_OPTIONS } from '../../../Helpers/constants';
import {
    DescriptionList,
    DescriptionListGroup,
    DescriptionListTermHelpText,
    DescriptionListTermHelpTextButton,
    Popover
} from '@patternfly/react-core';

export const CveStatusWithPopover = ({ popoverText, statusId }) => {
    const label = STATUS_OPTIONS
        .find(option => option.value === statusId)
        .label;

    const icon = STATUS_OPTIONS
        .find(option => option.value === statusId)
        .icon;

    return popoverText ?
        (<DescriptionList>
            <DescriptionListGroup>
                <DescriptionListTermHelpText>
                    <Popover
                        headerContent="Justification note"
                        bodyContent={popoverText}
                    >
                        <DescriptionListTermHelpTextButton style={{ fontWeight: 'normal' }}>
                            {icon}
                            {label}
                        </DescriptionListTermHelpTextButton>
                    </Popover>
                </DescriptionListTermHelpText>
            </DescriptionListGroup>
        </DescriptionList>
        ) : (
            <span>
                {icon}
                {label}
            </span>
        );
};

CveStatusWithPopover.propTypes = {
    popoverText: PropTypes.string,
    statusId: PropTypes.string
};
